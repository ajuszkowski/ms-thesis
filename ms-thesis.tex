% Aalto Master's Thesis template
%TODO : see ITMO template: https://github.com/kitchenknif/ITMOThesisTemplate
% Compatible with: UTF-8, pdflatex, biblatex, biber
%
% Compile using the following commands:
% $ pdflatex thesis.tex
% $ biber thesis
% $ pdflatex thesis.tex
%pdflatex -output-directory=out "\def\IsAalto{yes} \input{test.tex}" 
%pdflatex -output-directory=out "\input{test.tex}" 
\ifdefined\IsAalto
  \documentclass[12pt,a4paper,oneside,pdftex]{report}
  \usepackage[doublenumbering,twosupervisors]{lib/aalto-thesis}
\else
  \documentclass[14pt,a4paper,oneside,pdftex]{extreport}
  \usepackage{lib/itmo-thesis}
\fi


% Bibliography
\addbibresource{bib/ms-thesis.bib}

\newcommand{\TITLE}{\nohyphens{Automated Analysis of Weak Memory Models}}
%\newcommand{\FTITLE}{?}
%\newcommand{\FSUBTITLE}{}
%\newcommand{\FDATE}{?.?.2018} % TODO
\newcommand{\SUBTITLE}{}
\newcommand{\DATE}{18.6.2018}

% Supervisors and instructors
% ------------------------------------------------------------------
% If you have two supervisors, write both names here, separate them with a
% double-backslash (see below for an example)
% Also remember to add the package option ``twosupervisors'' or
% ``twoinstructors'' to the aalto-thesis package so that the titles are in
% plural.
% Example of one supervisor:
\newcommand{\SUPERVISOR}{Assoc. Prof. Keijo Heljanko\\Docent Igor I. Komarov}
%\newcommand{\FSUPERVISOR}{} % TODO
%\newcommand{\SSUPERVISOR}{} % TODO

% If you have only one instructor, just write one name here
%\newcommand{\INSTRUCTOR}{} % TODO
%\newcommand{\FINSTRUCTOR}{} % TODO
%\newcommand{\SINSTRUCTOR}{} % TODO
% If you have two instructors, separate them with \\ to create linefeeds
% \newcommand{\INSTRUCTOR}{Olli Ohjaaja M.Sc. (Tech.)\\
%  Elli Opas M.Sc. (Tech)}
%\newcommand{\FINSTRUCTOR}{Diplomi-insinööri Olli Ohjaaja\\
%  Diplomi-insinööri Elli Opas}
%\newcommand{\SINSTRUCTOR}{Diplomingenjör Olli Ohjaaja\\
%  Diplomingenjör Elli Opas}

% If you have two supervisors, it is common to write the schools
% of the supervisors in the cover page. If the following command is defined,
% then the supervisor names shown here are printed in the cover page. Otherwise,
% the supervisor names defined above are used.
%\newcommand{\COVERSUPERVISOR}{Professor Antti Ylä-Jääski, Aalto University\\
%  Professor Pekka Perustieteilijä, University of Helsinki}

% The same option is for the instructors, if you have multiple instructors.
% \newcommand{\COVERINSTRUCTOR}{Olli Ohjaaja M.Sc. (Tech.), Aalto University\\
%  Elli Opas M.Sc. (Tech), Aalto SCI}


% Other stuff
% ------------------------------------------------------------------
%\newcommand{\PROFESSORSHIP}{} % TODO
%\newcommand{\FPROFESSORSHIP}{?} % TODO check
% Professorship code is the same in all languages
%\newcommand{\PROFCODE}{AS-116} % TODO check
\newcommand{\KEYWORDS}{Weak memory models, concurrent programming, software verification, portability analysis, bounded reachability analysis, SMT-encoding}
%\newcommand{\FKEYWORDS}{Diplomityöpohja} % TODO
\newcommand{\LANGUAGE}{English}
%\newcommand{\FLANGUAGE}{Englanti} % TODO

% Author is the same for all languages
\newcommand{\AUTHOR}{Artem Yushkovskiy}


% Currently the English versions are used for the PDF file metadata
% Set the PDF title
\hypersetup{pdftitle={\TITLE\ \SUBTITLE}}
% Set the PDF author
\hypersetup{pdfauthor={Artem YUSHKOVSKIY}}
% Set the PDF keywords
\hypersetup{pdfkeywords={\KEYWORDS}}
% Set the PDF subject
\hypersetup{pdfsubject={Master's Thesis}}


% Layout settings
% ------------------------------------------------------------------

% When you write in English, you should use the standard LaTeX
% paragraph formatting: paragraphs are indented, and there is no
% space between paragraphs.
% When writing in Finnish, we often use no indentation in the
% beginning of the paragraph, and there is some space between the
% paragraphs.

% If you write your thesis Finnish, uncomment these lines; if
% you write in English, leave these lines commented!
%\setlength{\parindent}{0pt}
%\setlength{\parskip}{1ex}

% Use this to control how much space there is between each line of text.
% 1 is normal (no extra space), 1.3 is about one-half more space, and
% 1.6 is about double line spacing.
\ifdefined\IsAalto
  \linespread{1.05}
\else
  \linespread{1.3}
  %\setlength{\parindent}{1.25cm} %горизонтальн
  \setlength{\parskip}{0pt} %вертикальн
%  \renewcommand{\baselinestretch}{1} %между параграфами 
\fi
% \linespread{1.25}

% Extra hyphenation settings
% ------------------------------------------------------------------
% You can list here all the files that are not hyphenated correctly.
% You can provide many \hyphenation commands and/or separate each word
% with a space inside a single command. Put hyphens in the places where
% a word can be hyphenated.
% Note that (by default) LaTeX will not hyphenate words that already
% have a hyphen in them (for example, if you write ``structure-modification
% operation'', the word structure-modification will never be hyphenated).
% You need a special package to hyphenate those words.
%\hyphenation{di-gi-taa-li-sta}


% Proper style for book binding, left margin bigger than right margin
% Uncomment to take into use
%\setlength{\parindent}{0pt}
%\setlength{\parskip}{2ex}
%\setlength{\textwidth}{140mm}
%\setlength{\oddsidemargin}{20mm}
%\setlength{\evensidemargin}{20mm}
%\setlength{\textheight}{240mm}
%\setlength{\voffset}{3mm}
%\setlength{\topmargin}{-11mm}


%\definecolor{pblue}{rgb}{0.13,0.13,1}
%\definecolor{pgreen}{rgb}{0,0.5,0}
%\definecolor{pred}{rgb}{0.9,0,0}
%\definecolor{pgrey}{rgb}{0.46,0.45,0.48}
%\lstset{
%  showspaces=false,
%  showtabs=false,
%  breaklines=true,
%  showstringspaces=false,
%  breakatwhitespace=true,
%  commentstyle=\color{pgreen},
%  keywordstyle=\color{pblue},
%  stringstyle=\color{pred},
%  basicstyle=\ttfamily\scriptsize,
%  moredelim=[il][\textcolor{pgrey}]{$$},
%  moredelim=[is][\textcolor{pgrey}]{\%\%}{\%\%}
%}

% The preamble ends here, and the document begins.
% Place all formatting commands and such before this line.
% ------------------------------------------------------------------
\begin{document}

\def\firstToLow#1{\expandafter\firstToLowA#1!!}
\def\firstToLowA#1#2!!{\MakeLowercase{#1}#2}
\def\striplastDot#1{\striplastDota{#1}#1\end .\end\eend}
\def\striplastDota#1#2.\end#3\eend{\ifx\end#3\end#1\else#2\fi}

\newcommand{\myfootnote}[1]{%
\ifdefined\IsAalto%
\footnote{#1}%
\else%
\ (\striplastDot{\firstToLow{#1}})%
\fi%
}



% This command adds a PDF bookmark to the cover page
\pdfbookmark[0]{Cover}{bookmark.0.cover}

\startcoverpage

% Cover page
% ------------------------------------------------------------------
% Options: finnish, english, and swedish
\coverpage{english}

%change page numbering:
%\if 
%\addtocounter{page}{1}

% Abstract in English
% ------------------------------------------------------------------
\thesisabstract{english}{
Software verification is considered to be a hard computational problem vulnerable to the state explosion problem.
Concurrent software verification raises the complexity of the problem to a power determined by %by the factor defined
all the possible interleavings of states of the system. %concurrent parts of the system.
Moreover, the architecture of a modern shared-memory multi-core processor and optimisations performed by a compiler can cause program behaviour that is unexpected from the point of view of traditional concurrency.
The guarantees that an execution environment can provide to a programmer are formalised in its \textit{Weak Memory Model (WMM)}.
%The formalisation of weak memory models
Over the last decade, weak memory models were defined for multiple hardware architectures and programming languages.
%Thus, the memory model-aware software analysis 
%This opens/brings new 
%This opens new challenges in developing new and adapting existing methods for software verification with respect to a memory model.
This opens new challenges in software verification with respect to a weak memory model.
%Moreover, a modern shared-memory multiprocessor architecture or an optimising compiler can cause new program behaviours, unexpected from the point of view of traditional concurrency.
%These behaviours are described by the formal \textit{weak memory model} of an execution environment. %a processor architecture. % or a programming language.
%This opens large opportunities for missing bugs that are extremely difficult to reproduce and eliminate.
%formally described by <wmms> : guarantees even with aggressive hw and compiler optimisations

Most existing tools that perform memory model-aware software analysis examine behaviours of the program against a single memory model.
%Generally, they perform static 
%finite-state system
The first tool that analyses the \textit{portability} of a concurrent program from one platform to another is \textit{\porthos{}}~\cite{Porthos17a} released in April~2017.
\porthos{} can verify that the program is portable from the source platform $\mathcal{S}$ to the target platform $\mathcal{T}$ by checking that the program has no extra states under $\mathcal{T}$.
For that, it performs an SMT-based bounded reachability analysis by encoding the constraints of the program and two memory models $\mathcal{M_S}$ and $\mathcal{M_T}$ into a single SMT-formula.

Although the approach has been proven to be efficient, the tool accepts as input the small C-like toy language. % and remains to have hardly extensible architecture. %proof-of-concept 
Current thesis aims to rework \porthos{} by extending its input language, so that it is able to process real-world C programs.
However, current implementation of \porthos{} seems to be hard to extend, which raises the need to redesign its whole architecture in order to increase the robustness, transparency, efficiency and extensibility.
The result of the work is \textit{\porthos[2]}, a framework for SMT-based memory model-aware analysis.
%to redesign \porthos{} so that 
%considers the problem of the memory model-aware program verification, especially verification the portability from one architecture to another.
%The main goal of the work was to rework the proof-of-concept tool \porthos{}, <extend the input lang>, rework architecture towards the framework for analysis of C 
}

% Acknowledgements
% ------------------------------------------------------------------
% Select the language you use in your acknowledgements
\selectlanguage{english}
% Uncomment this line if you wish acknoledgements to appear in the table of contents
%\addcontentsline{toc}{chapter}{Acknowledgements}

\chapter*{Acknowledgements}
First of all, I wish to thank Professor Keijo Heljanko for his continuous support in both technical and mental aspects of the work.
He has opened for me the opportunity of working in this extremely interesting project; he guided and assisted me during six months, explaining all the things I don't understand and helping to find the way when I have lost it.

Also, I feel grateful to the development team of the static analyser Application Inspector by Positive Technologies, where I've been working in~2017.
This was an important experience for me, there I learned how the high-class code analysers look like.
Especially I want to thank Vladimir Kochetkov who has a gift of explaining the complex matter in simplest words, and Stanislav Matveev who has taught me how to be a perfectionist in writing the code.

Although I did far not all things that I could have done, I learned a lot during the work on this project: about the compilation theory and logic, about concurrency and programming, and, most importantly, about myself.


\vskip 10mm

\noindent %\ATCITY
Espoo, Finland \newline
Saint Petersburg, Russia
\newline
\DATE
\vskip 5mm
\noindent \AUTHOR


% ------------------------------------------------------------------
% Use \cleardoublepage so that IF two-sided printing is used
% (which is not often for masters theses), then the pages will still
% start correctly on the right-hand side.
\cleardoublepage


\ifdefined\IsAalto
  \addcontentsline{toc}{chapter}{Abbreviations}
  \input{50_abbreviations}
\else
\fi


% Table of contents
% ------------------------------------------------------------------
\cleardoublepage
% This command adds a PDF bookmark that links to the contents.
% You can use \addcontentsline{} as well, but that also adds contents
% entry to the table of contents, which is kind of redundant.
% The text ``Contents'' is shown in the PDF bookmark.
\pdfbookmark[0]{Table of contents}{bookmark.0.contents}
\tableofcontents

% List of tables
% ------------------------------------------------------------------
% You only need a list of tables for your thesis if you have very
% many tables. If you do, uncomment the following two lines.
%\cleardoublepage
%\listoftables

% Table of figures
% ------------------------------------------------------------------
% You only need a list of figures for your thesis if you have very
% many figures. If you do, uncomment the following two lines.
\cleardoublepage
%\phantomsection
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

% The following label is used for counting the prelude pages %https://latex.org/forum/viewtopic.php?t=21520 :
%\phantomsection %does not work either
%\newcounter{dummy}\refstepcounter{dummy}

\label{pages-prelude}

\cleardoublepage


%%%%%%%%%%%%%%%%% The main content starts here %%%%%%%%%%%%%%%%%%%%%
% ------------------------------------------------------------------
% This command is defined in aalto-thesis.sty. It controls the page
% numbering based on whether the doublenumbering option is specified
\startfirstchapter


% The contents of the thesis are separated to their own files.
% Edit the content in these files, rename them as necessary.
% ------------------------------------------------------------------

\input{1_intro.tex}
\input{2_wmm.tex}
\input{3_encod.tex}
\input{4_impl.tex}
\input{5_eval.tex}
\input{90_summary.tex}


\ifdefined\IsAalto
\else
  \cleardoublepage
  \phantomsection
  \addcontentsline{toc}{chapter}{Abbreviations}
  \input{50_abbreviations}
\fi

% Fix numbering of bibliography section
\cleardoublepage
\phantomsection


\addcontentsline{toc}{chapter}{\bibname}

\printbibliography
%% And now the sub-bibliographies: we use three of them (based on the entry type). Each sub-bibliography assigns a different prefix. The option is called 'prefixnumbers' because it was originally intended for numeric citations only. It also works with alphabetic labels:
%\printbibliography[heading=subbibliography,title={Articles},type=article]%,prefixnumbers={A-}]
%\printbibliography[heading=subbibliography,title={Books},type=book]%,prefixnumbers={B-}]
%\printbibliography[heading=subbibliography,title={Collections},type=collection]%,prefixnumbers={C-}]

% Appendices go here
% ------------------------------------------------------------------
% Fix numbering of bibliography section
%\cleardoublepage


%\titlespacing*{\section}{0pt}{-40pt}{20pt}
%\titlespacing{command}{left spacing}{before spacing}{after spacing}[right]

%
%\titleformat{hcommandi}[hshapei]{hformati}{hlabeli}{hsepi}{hbefore-codei}[hafter-codei]


%{

\newcommand{\sectionbreak}{\cleardoublepage}
\renewcommand{\thesection}{A.\arabic{section}}

\cleardoublepage\makeatletter\@openrightfalse\makeatother

\phantomsection
\appendix
\addcontentsline{toc}{chapter}{Appendices}

%\titlespacing*{command}{left}{beforesep}{aftersep}[right]
\ifdefined\IsAalto
  \titleformat{\section}[display]{\normalfont\large\bfseries}{}{0pt}{\thesection\quad\large}
  \titlespacing{\section}{0pt}{-20pt}{5pt}
  \fancyhead[R]{\footnotesize\itshape{APPENDICES}}
\else
  \titlespacing{\section}{0pt}{-20pt}{-5pt}
  \titleformat{\section}[display]{\normalfont\large\bfseries}{}{0pt}{\vspace{-2em}\thesection\quad\large#1}
\fi
\appendixpage


\input{91_apx_trees}
\input{92_apx_hook}
\input{93_apx_y2xconverter}
\let\cleardoublepage\clearpage
\input{94_apx_interpreter}
\let\cleardoublepage\clearpage
\input{95_apx_dekker}
\input{96_apx_output}


% End of document!
% ------------------------------------------------------------------
% The LastPage package automatically places a label on the last page.
% That works better than placing a label here manually, because the
% label might not go to the actual last page, if LaTeX needs to place
% floats (that is, figures, tables, and such) to the end of the
% document.
\end{document}

